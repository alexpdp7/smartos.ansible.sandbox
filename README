SmartOS modules are in the devel branch for Ansible 2.3, so you cannot use
packaged/pip versions.

Create a virtualenv with Python 3 and:

$ pip install -r requirements.txt

You might need to pip install appdirs separately prior to that.

Install Python on SmartOS so it can be managed by Ansible:

$ ansible-playbook -i hosts bootstrap_ansible.yml

Create an etherstub:

$ ansible-playbook setup_etherstub.yml

Create a pair of CentOS 7 LX Zones:

$ ansible-playbook create_centos.yml

You should now be able to access zone1 with Ansible's inventory:

$ ansible -m ping zone1

And access the internal zone2 through zone1:

$ ssh -i private.key -o ProxyCommand="ssh -i private.key -W %h:%p root@10.76.78.11" root@10.76.79.2
